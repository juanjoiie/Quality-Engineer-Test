# Quality-Engineer-Test
Repository created and shared for quality engineer position

Currently the repository contains 5 Folders and 11 Files, most of them are generated during the job and transformations executions.

- The required files used for this process are:
Source Files
  * Online Retail - GitHub Scheckley.csv -> This file has been copied from the following GitHub repository 
    - https://github.com/scheckley/online-retail (filename - data.csv) *The file was used for another topic.
      I have deleted half of the records due to GitHub does not allow to upload files over 25MB.
  * Customers.xls - Sample file with simple customer data generated in Mockaroo (https://mockaroo.com/) to be used as a lookup in 
                    transformation.
  * USD -  LocalCurrency.csv - Sample file with local currency rates to USD to be used to calculate total sales in local currency 
           in the transformation.
           
Pentaho Files
  * Job File - ETL_Quality_Engineer_Test.kjb (Comments within the file)
  * Transformations - ETL_Quality_Engineer_Test_Main.ktr and ETL_Quality_Engineer_Test_Export_XLS.ktr (Comments within the files)

Batch file (optional)  
  * ETL_Quality_Engineer_Test.bat - Bat file which uses Kitchen.exe from the Pentaho directory to execute the Pentaho job.
  * BatchJobLog.log - Log file generated after the excecution of batch file ETL_Quality_Engineer_Test

  - The folders and files generated by the process execution are:
    * Input - Input folder contains a copy of the source files in the project folder (it was created to avoid changes in the 
      original files).
    * Output - Output folder contains the generated files after the process execution
    *Logs - Logs folder contains the logs files generated by each transformation separatey.
    
SoapUI Files
  * Testing - Quality Engineer-readyapi-project.xml - Main project file 
  * SoapUI Testing folder - Generated folder which contains all the TESTs for this project.
  * Testing Quality Engineer Report.pdf - Generated report after running all tests (The fail steps were set to validate error messages)
    
** The Database folder is optional; it contains the database connection script, the CREATE TABLE statement in MySQL for the table used 
   to transfer the records and a snapshot of the database table with the loaded data by the process.

Pentaho ETL process

- The process starts by creating the Logs, Input and Output folders (if they do not exist), then the source files in the 
  project folder are copied and pasted in the input file to avoid using the original ones, then the transformations starts and in 
  in parallel the logs files are created, updated and saved in the Logs folder. 
  
  * The first transformation reads the Online Retail data and removes the records that contains empty Customer ids and it generates 
    a txt file with these records which is saved in the Output folder. After that, the Customer ids are replaced by the Customer names 
    through a lookup with the Customer source file, finally the records are aggregated and the dataset are inserted into the 
    sales_summary table.
  * The second transformation creates a MySQL query which joins the sales_summary table with a Country table (sample table in MySQL)
    to retrieve detailed geographical data, then the data is joined with the Local Curreny source data to calculate the sales summary 
    data in local currency, finally a XLS file is generated and exported to the Output folder.
    
SoapUI Testing Process

- All Test Suits and Test Cases are described in the description field within the SoapUI project. See below a description of the covered Test Steps.

* Test Suite - Pentaho Job 
  * Test Case - Batch Job
    * Test Steps (Property value - Batch file path)
		- ValidateBatchFile - It checks through a script if the .bat file to launch the Pentaho Job and Transformations exist
			+ Input - Batch file path
			+ Expected Output - Batch file located in path
		- ExecuteBatchFile - Script which runs the .bat file to start the Pentaho process
			+ Input - Batch file path
			+ Expected Output - Batch file execution (CMD)
* Test Suite - MySQL Database 
  * Test Case - Attributes
	* Test Steps
		- NullInvoiceDate - JDBC request to check if there are invalid dates
			+ Input - Query with contained years
			+ Expected Output - Valid assertion with years higher than 0 (or defined by business rule e.g. >= 2000)
		- YearInvoiceDate - JDBC request to review the contained years
			+ Input - Query with contained years
			+ Expected Output - Valid assertion with year entered by user 
		- CountryNumber - JDBC request to know the number of countries
			+ Input - Query with total country number
			+ Expected Output - Valid assertion with total number less or equal to 40 (or defined by business rule e.g. = 50) 
		- CountriesList - JDBC request to review the contained countries
			+ Input - Query with list of countries names
			+ Expected Output - Valid assertion with country name entered by user 
		- CustomerNumber - JDBC request to know the number of customers
			+ Input - Query with total customers number
			+ Expected Output - Valid assertion with total customer less than 3000 (or defined by business rule e.g. >= 2250 and <= 2705)
		- CustomerList - JDBC request to review the contained customer names
			+ Input - Query with list of customers names
			+ Expected Output - Valid assertion with customer name entered by user 
  * Test Case - Measures
	* Test Steps
		- TotalInvoices - JDBC request to validate if the invoice number are valid (positive number)
			+ Input - Query with minimum total invoice number
			+ Expected Output - Valid assertion with total invoice number higher than 0 (or defined by business rule e.g. = 0)		
		- TotalQty - JDBC request to validate if the quantity products are valid (positive number)
			+ Input - Query with minimum total quantity number
			+ Expected Output - Valid assertion with total quantity number higher than 0 (or defined by business rule e.g. >= -50 and <= 50)
		- TotalDue - JDBC request to validate if the sales values are valid (positive number)
			+ Input - Query with minimum total due number
			+ Expected Output - Valid assertion with total due number higher than 0 (or defined by business rule e.g. >= -99999)
  * Test Case - Columns
	* Test Steps
		- ColumnsPositions - JDBC request to check if the db table column are positioned as expected
			+ Input - Query with column name and position in DB
			+ Expected Output - Valid assertion with correct column position and defined name 
		- ColumnsCount - JDBC request to check how many columns the db table has as expected
			+ Input - Query with total columns number
			+ Expected Output - Valid assertion with total number equal to 6 (or defined by business rule e.g. = > 0 and <=8)  
* Test Suite - Imported Files 
  * Test Case - Input Folder (Property value - Input folder path)
	* Test Steps
		- ValidateInputFolder - Script to check if input folder created by the process exists
			+ Input - Input folder path
			+ Expected Output - Input folder located in path
		- ValidateOnlineRetailFile - Script to check if input csv file was copied successfully by the process 
			+ Input - File name path
			+ Expected Output - File name located in path
		- ValidateLocalCurrencyFile - Script to check if input txt file was copied successfully by the process 
			+ Input - File name path
			+ Expected Output - File name located in path
		- ValidateCustomerFile - Script to check if input xls file was copied successfully by the process 
			+ Input - File name path
			+ Expected Output - File name located in path
  * Test Case - Input Sources
	* Test Steps
		- OnlineRetail - Data source step to navigate the csv file
			+ Input - Data source configuration
			+ Expected Output - Data source view opened
		- Customers - Data source step to navigate the xls file
			+ Input - Data source configuration
			+ Expected Output - Data source view opened
		- LocalCurrency - Data source step to navigate the txt file
			+ Input - Data source configuration
			+ Expected Output - Data source view opened
* Test Suite - Exported Files 
  * Test Case - Output Folder (Property value - Output folder path)
	* Test Steps
		- ValidateOutputFolder - Script to check if output folder created by the process exists
			+ Input - Output folder path
			+ Expected Output - Output folder located in path
		- ValidateEmptyCustomerFile - Script to check if output txt file was generated and exported successfully by the process 
			+ Input - File name path
			+ Expected Output - File name located in path
		- ValidateOnlineRetailSummaryFile - Script to check if output xls file was generated and exported successfully by the process 
			+ Input - File name path
			+ Expected Output - File name located in path
  * Test Case - Output Sources (Property value - Output files path)
	* Test Steps
		- EmptyCustomer - Data source step to navigate the txt file
			+ Input - Data source configuration
			+ Expected Output - Data source view opened
		- EmptyCustomerCountContent - Script which review if exported txt file contains data 
			+ Input - Connection to txt file
			+ Expected Output - Valid assertion with total number of records higher than 0 (or defined by business rule e.g. > 999)
		- OnlineRetalSummary - Data source step to navigate the xls file
			+ Input - Data source configuration
			+ Expected Output - Data source view opened
		- OnlineRetailCountContent - Script which review if exported xls file contains data
			+ Input - Connection to xls file
			+ Expected Output - Valid assertion with total number of records higher than 0 (or defined by business rule e.g. >=1 and <=10000)
* Test Suite - Logs (Property value - Batch logs file path)
  * Test Case - Pentaho Logs (Property value - Logs folder path)
	* Test Steps
		- ValidateLogFolder - Script to check if log folder created by the process exists
			+ Input - Log folder path
			+ Expected Output - Log folder located in path
		- ValidateLogFiles - Script to check if log file was generated and exported successfully by the process
			+ Input - Logs file path
			+ Expected Output - Logs file located in path
  * Test Case - Batch Log 
	* Test Step 
		- ValidateBatchLogFile - Script to check if batch log file was generated and exported successfully by the process
			+ Input - Batch log file path
			+ Expected Output - Batch log file located in path
